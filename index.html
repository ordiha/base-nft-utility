<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Contracts Hub — Builder Repo</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0f172a;
      --card-bg:rgba(255,255,255,0.04);
      --accent:linear-gradient(135deg,#7b3fe4,#06b6d4);
      color-scheme:dark;
    }
    body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg1);color:#e6eef8;padding:32px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:32px}
    .logo{width:52px;height:52px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-weight:800}
    h1{font-size:22px;margin:0}
    p.lead{color:#a9c0dd;margin:4px 0 0}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
    .card{background:var(--card-bg);padding:18px;border-radius:14px;box-shadow:0 6px 16px rgba(0,0,0,0.4)}
    .card h3{margin:0 0 8px;font-size:17px}
    .desc{color:#9fb6d8;font-size:13px;margin-bottom:10px}
    .btn{cursor:pointer;padding:8px 12px;margin:4px 2px;border-radius:8px;font-size:13px;font-weight:600;border:none}
    .btn-primary{background:var(--accent);color:white}
    .btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.2);color:#e6eef8}
    footer{margin-top:30px;color:#94adc8;font-size:13px}
  </style>
</head>
<body>
<header>
  <div class="logo">B</div>
  <div>
    <h1>Builder Repo — Contracts Hub</h1>
    <p class="lead">Interact with all 6 deployed contracts. Connect wallet & try actions.</p>
  </div>
</header>

<main class="grid">
  <!-- GiveawayNFT -->
  <div class="card">
    <h3>GiveawayNFT (ERC721)</h3>
    <div class="desc">Owner-only batch mint NFTs.</div>
    <button class="btn btn-primary" onclick="connectWallet()">Connect Wallet</button>
    <button class="btn btn-outline" onclick="giveawayMint()">Giveaway Mint</button>
  </div>

  <!-- DonationTracker -->
  <div class="card">
    <h3>DonationTracker</h3>
    <div class="desc">Send ETH donations, track totals, owner can withdraw.</div>
    <button class="btn btn-primary" onclick="connectWallet()">Connect Wallet</button>
    <button class="btn btn-outline" onclick="donate()">Donate 0.0001 ETH</button>
  </div>

  <!-- VotingSystem -->
  <div class="card">
    <h3>VotingSystem</h3>
    <div class="desc">Vote once for your favorite proposal.</div>
    <button class="btn btn-primary" onclick="connectWallet()">Connect Wallet</button>
    <button class="btn btn-outline" onclick="vote(0)">Vote Proposal 1</button>
    <button class="btn btn-outline" onclick="vote(1)">Vote Proposal 2</button>
    <button class="btn btn-outline" onclick="vote(2)">Vote Proposal 3</button>
  </div>

  <!-- SimpleEscrow -->
  <div class="card">
    <h3>SimpleEscrow</h3>
    <div class="desc">Buyer funds escrow, arbiter releases/refunds.</div>
    <button class="btn btn-primary" onclick="connectWallet()">Connect Wallet</button>
    <button class="btn btn-outline" onclick="fundEscrow()">Fund (0.01 ETH)</button>
    <button class="btn btn-outline" onclick="releaseEscrow()">Release</button>
    <button class="btn btn-outline" onclick="refundEscrow()">Refund</button>
  </div>

  <!-- SubscriptionService -->
  <div class="card">
    <h3>SubscriptionService</h3>
    <div class="desc">Subscribe for 1 month (very low cost).</div>
    <button class="btn btn-primary" onclick="connectWallet()">Connect Wallet</button>
    <button class="btn btn-outline" onclick="subscribe()">Subscribe (0.0000000001 ETH)</button>
  </div>

  <!-- TokenVesting -->
  <div class="card">
    <h3>TokenVesting</h3>
    <div class="desc">Claim vested ERC20 tokens.</div>
    <button class="btn btn-primary" onclick="connectWallet()">Connect Wallet</button>
    <button class="btn btn-outline" onclick="releaseVested()">Release vested tokens</button>
  </div>
</main>

<footer>⚡ Paste your deployed contract addresses in the script below before running.</footer>

<script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
<script>
  let signer;

  // === SET YOUR DEPLOYED ADDRESSES HERE ===
  const giveawayAddr = "0xYourGiveawayNFT";
  const donationAddr = "0xYourDonationTracker";
  const votingAddr   = "0xYourVotingSystem";
  const escrowAddr   = "0xYourSimpleEscrow";
  const subsAddr     = "0xYourSubscriptionService";
  const vestingAddr  = "0xYourTokenVesting";

  // === ABIs (minimal needed) ===
  const giveawayAbi = ["function giveawayMint(address[] calldata recipients) external"];
  const donationAbi = ["function donate() external payable"];
  const votingAbi   = ["function vote(uint256 proposalIndex) external"];
  const escrowAbi   = ["function fund() external payable","function release() external","function refund() external"];
  const subsAbi     = ["function subscribe(uint256 months) external payable"];
  const vestingAbi  = ["function release() external"];

  // === connect wallet ===
  async function connectWallet(){
    if(!window.ethereum) return alert("Install MetaMask");
    const provider = new ethers.BrowserProvider(window.ethereum);
    await provider.send("eth_requestAccounts",[]);
    signer = await provider.getSigner();
    alert("Wallet: " + await signer.getAddress());
  }

  // === functions ===
  async function giveawayMint(){
    const c = new ethers.Contract(giveawayAddr,giveawayAbi,signer);
    const tx = await c.giveawayMint([await signer.getAddress()]);
    await tx.wait(); alert("NFT minted!");
  }
  async function donate(){
    const c = new ethers.Contract(donationAddr,donationAbi,signer);
    const tx = await c.donate({value: ethers.parseEther("0.0001")});
    await tx.wait(); alert("Donation sent!");
  }
  async function vote(i){
    const c = new ethers.Contract(votingAddr,votingAbi,signer);
    const tx = await c.vote(i);
    await tx.wait(); alert("Voted for " + i);
  }
  async function fundEscrow(){
    const c = new ethers.Contract(escrowAddr,escrowAbi,signer);
    const tx = await c.fund({value: ethers.parseEther("0.01")});
    await tx.wait(); alert("Escrow funded!");
  }
  async function releaseEscrow(){
    const c = new ethers.Contract(escrowAddr,escrowAbi,signer);
    const tx = await c.release();
    await tx.wait(); alert("Escrow released!");
  }
  async function refundEscrow(){
    const c = new ethers.Contract(escrowAddr,escrowAbi,signer);
    const tx = await c.refund();
    await tx.wait(); alert("Escrow refunded!");
  }
  async function subscribe(){
    const c = new ethers.Contract(subsAddr,subsAbi,signer);
    const tx = await c.subscribe(1,{value:"100000000"}); // 0.0000000001 ETH
    await tx.wait(); alert("Subscribed!");
  }
  async function releaseVested(){
    const c = new ethers.Contract(vestingAddr,vestingAbi,signer);
    const tx = await c.release();
    await tx.wait(); alert("Tokens released!");
  }
</script>
</body>
</html>
